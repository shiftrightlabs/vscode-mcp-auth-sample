(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5200],{4264:(e,t)=>{"use strict";let r;var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}function s(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}"function"==typeof SuppressedError&&SuppressedError;var a={exports:{}};function l(){}l.prototype={on:function(e,t,r){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var n=this;function o(){n.off(e,o),t.apply(r,arguments)}return o._=t,this.on(e,o,r)},emit:function(e){for(var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),n=0,o=r.length;n<o;n++)r[n].fn.apply(r[n].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),n=r[e],o=[];if(n&&t)for(var i=0,s=n.length;i<s;i++)n[i].fn!==t&&n[i].fn._!==t&&o.push(n[i]);return o.length?r[e]=o:delete r[e],this}},a.exports=l;var u=a.exports.TinyEmitter=l,c=function(e){return null!=e[1]},h=function(e){var t=e.properties,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["properties"]),n=function(e){return Object.entries(e).sort(function(e,t){var r=e[0],n=t[0];return r.localeCompare(n,void 0)})};return JSON.stringify([n(r),n(void 0===t?{}:t)])},d=function(e){return i(void 0,void 0,void 0,function(){var t;return s(this,function(r){var n;switch(r.label){case 0:t=h(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(n=t,i(void 0,void 0,void 0,function(){var e,t,r,o;return s(this,function(i){switch(i.label){case 0:if(e="undefined"!=typeof globalThis&&(null==(r=globalThis.crypto)?void 0:r.subtle)?null==(o=globalThis.crypto)?void 0:o.subtle:void 0,"undefined"==typeof TextEncoder||!(null==e?void 0:e.digest)||"undefined"==typeof Uint8Array)throw Error("Hashing function not available");return t=(new TextEncoder).encode(n),[4,e.digest("SHA-256",t)];case 1:return[2,Array.from(new Uint8Array(i.sent())).map(function(e){return e.toString(16).padStart(2,"0")}).join("")]}})}))];case 2:return[2,r.sent()];case 3:return r.sent(),[2,t];case 4:return[2]}})})},f=function(e){var t,r=e.clientKey,n=e.appName,o=e.connectionId,i=e.customHeaders,s=e.headerName,a=e.etag,l=e.isPost,u=((t={accept:"application/json"})[(void 0===s?"authorization":s).toLocaleLowerCase()]=r,t["unleash-sdk"]="unleash-client-js:3.7.8",t["unleash-appname"]=n,t);return l&&(u["content-type"]="application/json"),a&&(u["if-none-match"]=a),Object.entries(i||{}).filter(c).forEach(function(e){var t=e[0],r=e[1];return u[t.toLocaleLowerCase()]=r}),u["unleash-connection-id"]=o,u},p=function(){},v=function(){function e(e){var t=e.onError,r=e.onSent,n=e.appName,o=e.metricsInterval,i=e.disableMetrics,s=e.url,a=e.clientKey,l=e.fetch,u=e.headerName,c=e.customHeaders,h=e.metricsIntervalInitial,d=e.connectionId;this.onError=t,this.onSent=r||p,this.disabled=void 0!==i&&i,this.metricsInterval=1e3*o,this.metricsIntervalInitial=1e3*h,this.appName=n,this.url=s instanceof URL?s:new URL(s),this.clientKey=a,this.bucket=this.createEmptyBucket(),this.fetch=l,this.headerName=u,this.customHeaders=void 0===c?{}:c,this.connectionId=d}return e.prototype.start=function(){var e=this;if(this.disabled)return!1;"number"==typeof this.metricsInterval&&this.metricsInterval>0&&(this.metricsIntervalInitial>0?setTimeout(function(){e.startTimer(),e.sendMetrics()},this.metricsIntervalInitial):this.startTimer())},e.prototype.stop=function(){this.timer&&(clearInterval(this.timer),delete this.timer)},e.prototype.createEmptyBucket=function(){return{start:new Date,stop:null,toggles:{}}},e.prototype.getHeaders=function(){return f({clientKey:this.clientKey,appName:this.appName,connectionId:this.connectionId,customHeaders:this.customHeaders,headerName:this.headerName,isPost:!0})},e.prototype.sendMetrics=function(){return i(this,void 0,void 0,function(){var e,t,r;return s(this,function(n){switch(n.label){case 0:if(e="".concat(this.url,"/client/metrics"),t=this.getPayload(),this.bucketIsEmpty(t))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fetch(e,{cache:"no-cache",method:"POST",headers:this.getHeaders(),body:JSON.stringify(t)})];case 2:return n.sent(),this.onSent(t),[3,4];case 3:return console.error("Unleash: unable to send feature metrics",r=n.sent()),this.onError(r),[3,4];case 4:return[2]}})})},e.prototype.count=function(e,t){return!(this.disabled||!this.bucket)&&(this.assertBucket(e),this.bucket.toggles[e][t?"yes":"no"]++,!0)},e.prototype.countVariant=function(e,t){return!(this.disabled||!this.bucket)&&(this.assertBucket(e),this.bucket.toggles[e].variants[t]?this.bucket.toggles[e].variants[t]+=1:this.bucket.toggles[e].variants[t]=1,!0)},e.prototype.assertBucket=function(e){if(this.disabled||!this.bucket)return!1;this.bucket.toggles[e]||(this.bucket.toggles[e]={yes:0,no:0,variants:{}})},e.prototype.startTimer=function(){var e=this;this.timer=setInterval(function(){e.sendMetrics()},this.metricsInterval)},e.prototype.bucketIsEmpty=function(e){return 0===Object.keys(e.bucket.toggles).length},e.prototype.getPayload=function(){var e=o(o({},this.bucket),{stop:new Date});return this.bucket=this.createEmptyBucket(),{bucket:e,appName:this.appName,instanceId:"browser"}},e}(),g=function(){function e(){this.store=new Map}return e.prototype.save=function(e,t){return i(this,void 0,void 0,function(){return s(this,function(r){return this.store.set(e,t),[2]})})},e.prototype.get=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){return[2,this.store.get(e)]})})},e}(),m=function(){function e(e){void 0===e&&(e="unleash:repository"),this.prefix=e}return e.prototype.save=function(e,t){return i(this,void 0,void 0,function(){var r,n;return s(this,function(o){r=JSON.stringify(t),n="".concat(this.prefix,":").concat(e);try{window.localStorage.setItem(n,r)}catch(e){console.error(e)}return[2]})})},e.prototype.get=function(e){try{var t="".concat(this.prefix,":").concat(e),r=window.localStorage.getItem(t);return r?JSON.parse(r):void 0}catch(e){console.error(e)}},e}();let y=new Uint8Array(16),b=[];for(let e=0;e<256;++e)b.push((e+256).toString(16).slice(1));var E={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},S=function(){function e(){}return e.prototype.generateEventId=function(){return function(e,t,n){if(E.randomUUID&&!e)return E.randomUUID();let o=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(y)})();o[6]=15&o[6]|64,void(o[8]=63&o[8]|128);return function(e,t=0){return b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]}(o)}()},e.prototype.createImpressionEvent=function(e,t,r,n,i,s){var a=this.createBaseEvent(e,t,r,n,i);return s?o(o({},a),{variant:s}):a},e.prototype.createBaseEvent=function(e,t,r,n,o){return{eventType:n,eventId:this.generateEventId(),context:e,enabled:t,featureName:r,impressionData:o}},e}(),T=["userId","sessionId","remoteAddress","currentTime"],x=function(e){return T.includes(e)},w={INIT:"initialized",ERROR:"error",READY:"ready",UPDATE:"update",IMPRESSION:"impression",SENT:"sent",RECOVERED:"recovered"},I={name:"disabled",enabled:!1,feature_enabled:!1},R="repo",N="repoLastUpdateTimestamp",P=function(){try{if("undefined"!=typeof window&&"fetch"in window)return fetch.bind(window);if("fetch"in globalThis)return fetch.bind(globalThis)}catch(e){console.error('Unleash failed to resolve "fetch"',e)}},U=function(e){function t(t){var r,n=t.storageProvider,i=t.url,s=t.clientKey,a=t.disableRefresh,l=t.refreshInterval,u=t.metricsInterval,c=t.metricsIntervalInitial,h=t.disableMetrics,d=t.appName,f=t.environment,p=t.context,y=t.fetch,b=void 0===y?P():y,E=t.createAbortController,T=void 0===E?function(){try{if("undefined"!=typeof window&&"AbortController"in window)return function(){return new window.AbortController};if("fetch"in globalThis)return function(){return new globalThis.AbortController}}catch(e){console.error('Unleash failed to resolve "AbortController" factory',e)}}():E,x=t.bootstrap,I=t.bootstrapOverride,R=t.headerName,N=void 0===R?"Authorization":R,U=t.customHeaders,_=void 0===U?{}:U,C=t.impressionDataAll,A=t.usePOSTrequests,O=t.experimental,L=e.call(this)||this;if(L.toggles=[],L.etag="",L.readyEventEmitted=!1,L.fetchedFromServer=!1,L.usePOSTrequests=!1,L.started=!1,!i)throw Error("url is required");if(!s)throw Error("clientKey is required");if(!d)throw Error("appName is required.");L.eventsHandler=new S,L.impressionDataAll=void 0!==C&&C,L.toggles=x&&x.length>0?x:[],L.url=i instanceof URL?i:new URL(i),L.clientKey=s,L.headerName=N,L.customHeaders=_,L.storage=n||("undefined"!=typeof window?new m:new g),L.refreshInterval=void 0!==a&&a?0:1e3*(void 0===l?30:l),L.context=o({appName:d,environment:void 0===f?"default":f},p),L.usePOSTrequests=void 0!==A&&A,L.sdkState="initializing";var k=null==O?void 0:O.metricsUrl;return!k||k instanceof URL||(k=new URL(k)),L.experimental=o(o({},O),{metricsUrl:k}),(null==O?void 0:O.togglesStorageTTL)&&(null==O?void 0:O.togglesStorageTTL)>0&&(L.experimental.togglesStorageTTL=1e3*O.togglesStorageTTL),L.lastRefreshTimestamp=0,L.ready=new Promise(function(e){L.init().then(e).catch(function(t){console.error(t),L.sdkState="error",L.emit(w.ERROR,t),L.lastError=t,e()})}),b||console.error('Unleash: You must either provide your own "fetch" implementation or run in an environment where "fetch" is available.'),T||console.error('Unleash: You must either provide your own "AbortController" implementation or run in an environment where "AbortController" is available.'),L.fetch=b,L.createAbortController=T,L.bootstrap=x&&x.length>0?x:void 0,L.bootstrapOverride=void 0===I||I,L.connectionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),L.metrics=new v({onError:L.emit.bind(L,w.ERROR),onSent:L.emit.bind(L,w.SENT),appName:d,metricsInterval:void 0===u?30:u,disableMetrics:void 0!==h&&h,url:(null==(r=L.experimental)?void 0:r.metricsUrl)||L.url,clientKey:s,fetch:b,headerName:N,customHeaders:_,metricsIntervalInitial:void 0===c?2:c,connectionId:L.connectionId}),L}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.getAllToggles=function(){return function(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([],this.toggles,!0)},t.prototype.isEnabled=function(e){var t,r=this.toggles.find(function(t){return t.name===e}),n=!!r&&r.enabled;if(this.metrics.count(e,n),(null==r?void 0:r.impressionData)||this.impressionDataAll){var o=this.eventsHandler.createImpressionEvent(this.context,n,e,"isEnabled",null!=(t=null==r?void 0:r.impressionData)?t:void 0);this.emit(w.IMPRESSION,o)}return n},t.prototype.getVariant=function(e){var t,r=this.toggles.find(function(t){return t.name===e}),n=(null==r?void 0:r.enabled)||!1,i=r?r.variant:I;if(i.name&&this.metrics.countVariant(e,i.name),this.metrics.count(e,n),(null==r?void 0:r.impressionData)||this.impressionDataAll){var s=this.eventsHandler.createImpressionEvent(this.context,n,e,"getVariant",null!=(t=null==r?void 0:r.impressionData)?t:void 0,i.name);this.emit(w.IMPRESSION,s)}return o(o({},i),{feature_enabled:n})},t.prototype.updateToggles=function(){return i(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return this.timerRef||this.fetchedFromServer?[4,this.fetchToggles()]:[3,2];case 1:return t.sent(),[3,4];case 2:return this.started?[4,new Promise(function(t){var r=function(){e.fetchToggles().then(function(){e.off(w.READY,r),t()})};e.once(w.READY,r)})]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.updateContext=function(e){return i(this,void 0,void 0,function(){var t;return s(this,function(r){switch(r.label){case 0:return(e.appName||e.environment)&&console.warn("appName and environment are static. They can't be updated with updateContext."),t={environment:this.context.environment,appName:this.context.appName,sessionId:this.context.sessionId},this.context=o(o({},t),e),[4,this.updateToggles()];case 1:return r.sent(),[2]}})})},t.prototype.getContext=function(){return o({},this.context)},t.prototype.setContextField=function(e,t){return i(this,void 0,void 0,function(){var r,n,i;return s(this,function(s){switch(s.label){case 0:return x(e)?this.context=o(o({},this.context),((n={})[e]=t,n)):(r=o(o({},this.context.properties),((i={})[e]=t,i)),this.context=o(o({},this.context),{properties:r})),[4,this.updateToggles()];case 1:return s.sent(),[2]}})})},t.prototype.removeContextField=function(e){return i(this,void 0,void 0,function(){var t;return s(this,function(r){switch(r.label){case 0:return x(e)?this.context=o(o({},this.context),((t={})[e]=void 0,t)):"object"==typeof this.context.properties&&delete this.context.properties[e],[4,this.updateToggles()];case 1:return r.sent(),[2]}})})},t.prototype.setReady=function(){this.readyEventEmitted=!0,this.emit(w.READY)},t.prototype.init=function(){return i(this,void 0,void 0,function(){var e,t,r;return s(this,function(n){switch(n.label){case 0:return[4,this.resolveSessionId()];case 1:return e=n.sent(),this.context=o({sessionId:e},this.context),[4,this.storage.get(R)];case 2:return t=n.sent()||[],r=this,[4,this.getLastRefreshTimestamp()];case 3:return r.lastRefreshTimestamp=n.sent(),this.bootstrap&&(this.bootstrapOverride||0===t.length)?[4,this.storage.save(R,this.bootstrap)]:[3,6];case 4:return n.sent(),this.toggles=this.bootstrap,this.sdkState="healthy",[4,this.storeLastRefreshTimestamp()];case 5:return n.sent(),this.setReady(),[3,7];case 6:this.toggles=t,n.label=7;case 7:return this.sdkState="healthy",this.emit(w.INIT),[2]}})})},t.prototype.start=function(){return i(this,void 0,void 0,function(){var e,t=this;return s(this,function(r){switch(r.label){case 0:return this.started=!0,this.timerRef?(console.error("Unleash SDK has already started, if you want to restart the SDK you should call client.stop() before starting again."),[2]):[4,this.ready];case 1:return r.sent(),this.metrics.start(),e=this.refreshInterval,[4,this.initialFetchToggles()];case 2:return r.sent(),e>0&&(this.timerRef=setInterval(function(){return t.fetchToggles()},e)),[2]}})})},t.prototype.stop=function(){this.timerRef&&(clearInterval(this.timerRef),this.timerRef=void 0),this.metrics.stop()},t.prototype.isReady=function(){return this.readyEventEmitted},t.prototype.getError=function(){return"error"===this.sdkState?this.lastError:void 0},t.prototype.sendMetrics=function(){return this.metrics.sendMetrics()},t.prototype.resolveSessionId=function(){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.context.sessionId?[2,this.context.sessionId]:[4,this.storage.get("sessionId")];case 1:return(e=t.sent())?[3,3]:(e=Math.floor(1e9*Math.random()),[4,this.storage.save("sessionId",e.toString(10))]);case 2:t.sent(),t.label=3;case 3:return[2,e.toString(10)]}})})},t.prototype.getHeaders=function(){return f({clientKey:this.clientKey,connectionId:this.connectionId,appName:this.context.appName,customHeaders:this.customHeaders,headerName:this.headerName,etag:this.etag,isPost:this.usePOSTrequests})},t.prototype.storeToggles=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.toggles=e,this.emit(w.UPDATE),[4,this.storage.save(R,e)];case 1:return t.sent(),[2]}})})},t.prototype.isTogglesStorageTTLEnabled=function(){var e;return!!((null==(e=this.experimental)?void 0:e.togglesStorageTTL)&&this.experimental.togglesStorageTTL>0)},t.prototype.isUpToDate=function(){if(!this.isTogglesStorageTTLEnabled())return!1;var e,t=Date.now(),r=(null==(e=this.experimental)?void 0:e.togglesStorageTTL)||0;return this.lastRefreshTimestamp>0&&this.lastRefreshTimestamp<=t&&t-this.lastRefreshTimestamp<=r},t.prototype.getLastRefreshTimestamp=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(r){switch(r.label){case 0:return this.isTogglesStorageTTLEnabled()?[4,this.storage.get(N)]:[3,3];case 1:return e=r.sent(),[4,d(this.context)];case 2:return t=r.sent(),[2,(null==e?void 0:e.key)===t?e.timestamp:0];case 3:return[2,0]}})})},t.prototype.storeLastRefreshTimestamp=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(r){switch(r.label){case 0:return this.isTogglesStorageTTLEnabled()?(this.lastRefreshTimestamp=Date.now(),t={},[4,d(this.context)]):[3,3];case 1:return t.key=r.sent(),t.timestamp=this.lastRefreshTimestamp,e=t,[4,this.storage.save(N,e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.initialFetchToggles=function(){if(!this.isUpToDate())return this.fetchToggles();this.fetchedFromServer||(this.fetchedFromServer=!0,this.setReady())},t.prototype.fetchToggles=function(){return i(this,void 0,void 0,function(){var e,t,r,n,o,i,a,l,u;return s(this,function(s){switch(s.label){case 0:if(!this.fetch)return[3,9];this.abortController&&!this.abortController.signal.aborted&&this.abortController.abort(),this.abortController=null==(u=this.createAbortController)?void 0:u.call(this),e=this.abortController?this.abortController.signal:void 0,s.label=1;case 1:var h,d,f;return s.trys.push([1,7,8,9]),r=(t=this.usePOSTrequests)?this.url:(h=this.url,d=this.context,f=new URL(h.toString()),Object.entries(d).filter(c).forEach(function(e){var t=e[0],r=e[1];"properties"===t&&r?Object.entries(r).filter(c).forEach(function(e){var t=e[0],r=e[1];return f.searchParams.append("properties[".concat(t,"]"),r)}):f.searchParams.append(t,r)}),f),n=t?"POST":"GET",o=t?JSON.stringify({context:this.context}):void 0,[4,this.fetch(r.toString(),{method:n,cache:"no-cache",headers:this.getHeaders(),body:o,signal:e})];case 2:return i=s.sent(),"error"===this.sdkState&&i.status<400&&(this.sdkState="healthy",this.emit(w.RECOVERED)),i.ok?(this.etag=i.headers.get("ETag")||"",[4,i.json()]):[3,5];case 3:return a=s.sent(),[4,this.storeToggles(a.toggles)];case 4:return s.sent(),"healthy"!==this.sdkState&&(this.sdkState="healthy"),this.fetchedFromServer||(this.fetchedFromServer=!0,this.setReady()),this.storeLastRefreshTimestamp(),[3,6];case 5:304===i.status?this.storeLastRefreshTimestamp():(console.error("Unleash: Fetching feature toggles did not have an ok response"),this.sdkState="error",this.emit(w.ERROR,{type:"HttpError",code:i.status}),this.lastError={type:"HttpError",code:i.status}),s.label=6;case 6:return[3,9];case 7:return"object"==typeof(l=s.sent())&&null!==l&&"name"in l&&"AbortError"===l.name||(console.error("Unleash: unable to fetch feature toggles",l),this.sdkState="error",this.emit(w.ERROR,l),this.lastError=l),[3,9];case 8:return this.abortController=null,[7];case 9:return[2]}})})},t}(u);t.EVENTS=w,t.InMemoryStorageProvider=g,t.LocalStorageProvider=m,t.UnleashClient=U,t.lastUpdateKey=N,t.resolveFetch=P},10609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUnleashClient=t.useUnleashContext=t.useFlagsStatus=t.useFlags=t.useVariant=t.useFlag=void 0;let n=r(67450);t.useFlag=e=>(0,n.useFlag)(e),t.useVariant=e=>(0,n.useVariant)(e),t.useFlags=()=>(0,n.useFlags)(),t.useFlagsStatus=n.useFlagsStatus,t.useUnleashContext=n.useUnleashContext,t.useUnleashClient=n.useUnleashClient},13520:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlagProvider=void 0;let n=r(54568),o=r(67450),i=r(63e3);t.FlagProvider=({children:e,...t})=>(0,n.jsx)(o.FlagProvider,{...t,startClient:void 0!==t.startClient?t.startClient:"undefined"!=typeof window,config:{...(0,i.getDefaultClientConfig)(),...t.config},children:e})},63e3:(e,t,r)=>{"use strict";var n=r(40459);Object.defineProperty(t,"__esModule",{value:!0}),t.removeTrailingSlash=t.getDefaultServerConfig=t.getDefaultClientConfig=t.getServerBaseUrl=t.randomSessionId=t.safeCompare=void 0,t.safeCompare=(e,t)=>{let r=String(e),n=String(t),o=r.length,i=0;o!==n.length&&(n=r,i=1);for(let e=0;e<o;e++)i|=r.charCodeAt(e)^n.charCodeAt(e);return 0===i},t.randomSessionId=()=>`${Math.floor(1e9*Math.random())}`;let o=()=>{n.env.NEXT_PUBLIC_UNLEASH_SERVER_API_TOKEN&&console.warn("You are trying to set `NEXT_PUBLIC_UNLEASH_SERVER_API_TOKEN`. Server keys shouldn't be public. Use frontend keys or skip `NEXT_PUBLIC_ prefix.")};t.getServerBaseUrl=()=>n.env.UNLEASH_SERVER_API_URL||n.env.NEXT_PUBLIC_UNLEASH_SERVER_API_URL,t.getDefaultClientConfig=()=>(o(),{url:n.env.UNLEASH_FRONTEND_API_URL||n.env.NEXT_PUBLIC_UNLEASH_FRONTEND_API_URL||`${(0,t.getServerBaseUrl)()||"http://localhost:4242/api"}/frontend`,appName:n.env.UNLEASH_APP_NAME||n.env.NEXT_PUBLIC_UNLEASH_APP_NAME||"nextjs",clientKey:n.env.UNLEASH_FRONTEND_API_TOKEN||n.env.NEXT_PUBLIC_UNLEASH_FRONTEND_API_TOKEN||"default:development.unleash-insecure-frontend-api-token"}),t.getDefaultServerConfig=()=>(o(),{url:(0,t.getServerBaseUrl)()||"http://localhost:4242/api",appName:n.env.UNLEASH_APP_NAME||n.env.NEXT_PUBLIC_UNLEASH_APP_NAME||"nextjs",clientKey:n.env.UNLEASH_SERVER_API_TOKEN||"default:development.unleash-insecure-server-api-token"}),t.removeTrailingSlash=e=>e?.replace(/\/$/,"")},67450:function(e,t,r){(function(e,t,r){"use strict";let n=r.createContext(null),o={bootstrap:[],disableRefresh:!0,disableMetrics:!0,url:"http://localhost",appName:"offline",clientKey:"not-used"},i=r.startTransition||(e=>e()),s=({config:e,children:s,unleashClient:a,startClient:l=!0,stopClient:u=!0,startTransition:c=i})=>{var h,d,f;let p=e||o,v=r.useRef(a||new t.UnleashClient(p)),[g,m]=r.useState(!!(a?null!=e&&e.bootstrap&&(null==e?void 0:e.bootstrapOverride)!==!1||null!=(h=a.isReady)&&h.call(a):p.bootstrap&&!1!==p.bootstrapOverride)),[y,b]=r.useState((null==(f=(d=v.current).getError)?void 0:f.call(d))||null);r.useEffect(()=>{p||a||console.error(`You must provide either a config or an unleash client to the flag provider.
        If you are initializing the client in useEffect, you can avoid this warning
        by checking if the client exists before rendering.`);let e=e=>{c(()=>{b(t=>t||e)})},t=e=>{c(()=>{b(null)})},r=null,n=()=>{r=setTimeout(()=>{c(()=>{m(!0)})},0)};return v.current.on("ready",n),v.current.on("error",e),v.current.on("recovered",t),l&&(v.current.stop(),v.current.start()),function(){v.current&&(v.current.off("error",e),v.current.off("ready",n),v.current.off("recovered",t),u&&v.current.stop()),r&&clearTimeout(r)}},[]);let E=r.useMemo(()=>({on:(e,t,r)=>v.current.on(e,t,r),off:(e,t)=>v.current.off(e,t),updateContext:async e=>await v.current.updateContext(e),isEnabled:e=>v.current.isEnabled(e),getVariant:e=>v.current.getVariant(e),client:v.current,flagsReady:g,flagsError:y,setFlagsReady:m,setFlagsError:b}),[g,y]);return r.createElement(n.Provider,{value:E},s)},a={on:(e,t,r)=>(console.error("on() must be used within a FlagProvider"),l),off:(e,t)=>(console.error("off() must be used within a FlagProvider"),l),updateContext:async()=>{console.error("updateContext() must be used within a FlagProvider")},isEnabled:()=>(console.error("isEnabled() must be used within a FlagProvider"),!1),getVariant:()=>(console.error("getVariant() must be used within a FlagProvider"),{name:"disabled",enabled:!1})},l={...a,toggles:[],impressionDataAll:{},context:{},storage:{},start:()=>{},stop:()=>{},isReady:()=>!1,getError:()=>null,getAllToggles:()=>[]},u={...a,client:l,flagsReady:!1,setFlagsReady:()=>{console.error("setFlagsReady() must be used within a FlagProvider")},flagsError:null,setFlagsError:()=>{console.error("setFlagsError() must be used within a FlagProvider")}};function c(){return r.useContext(n)||(console.error("useFlagContext() must be used within a FlagProvider"),u)}Object.defineProperty(e,"InMemoryStorageProvider",{enumerable:!0,get:()=>t.InMemoryStorageProvider}),Object.defineProperty(e,"LocalStorageProvider",{enumerable:!0,get:()=>t.LocalStorageProvider}),Object.defineProperty(e,"UnleashClient",{enumerable:!0,get:()=>t.UnleashClient}),e.FlagContext=n,e.FlagProvider=s,e.default=s,e.useFlag=e=>{let{isEnabled:t,client:n}=c(),[o,i]=r.useState(!!t(e)),s=r.useRef();return s.current=o,r.useEffect(()=>{if(!n)return;let r=()=>{let r=t(e);r!==s.current&&(s.current=r,i(!!r))},o=()=>{let r=t(e);s.current=r,i(r)};return n.on("update",r),n.on("ready",o),()=>{n.off("update",r),n.off("ready",o)}},[n]),o},e.useFlags=()=>{let{client:e}=c(),[t,n]=r.useState(e.getAllToggles());return r.useEffect(()=>{let t=()=>{n(e.getAllToggles())};return e.on("update",t),()=>{e.off("update",t)}},[]),t},e.useFlagsStatus=()=>{let{flagsReady:e,flagsError:t}=c();return{flagsReady:e,flagsError:t}},e.useUnleashClient=()=>{let{client:e}=c();return e},e.useUnleashContext=()=>{let{updateContext:e}=c();return e},e.useVariant=e=>{let{getVariant:t,client:n}=c(),[o,i]=r.useState(t(e)),s=r.useRef({name:o.name,enabled:o.enabled});return s.current=o,r.useEffect(()=>{if(!n)return;let r=()=>{var r,n,o,a,l;let u=t(e);r=s.current,(r.name!==(null==u?void 0:u.name)||r.enabled!==(null==u?void 0:u.enabled)||r.feature_enabled!==(null==u?void 0:u.feature_enabled)||(null==(n=r.payload)?void 0:n.type)!==(null==(o=null==u?void 0:u.payload)?void 0:o.type)||(null==(a=r.payload)?void 0:a.value)!==(null==(l=null==u?void 0:u.payload)?void 0:l.value))&&(i(u),s.current=u)},o=()=>{let r=t(e);s.current.name=null==r?void 0:r.name,s.current.enabled=null==r?void 0:r.enabled,i(r)};return n.on("update",r),n.on("ready",o),()=>{n.off("update",r),n.off("ready",o)}},[n]),o||{}},Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})(t,r(4264),r(7620))}}]);